<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<title>Promise异步</title>
	<script src="https://unpkg.com/axios/dist/axios.js"></script>
</head>
<body>
	
</body>
<script>
function sleep (ms) {
	return new Promise((resolve, reject) => {
		setTimeout(() => {
			resolve('val')
		}, ms)
	})
}

/* sleep(2000).then( _ => {
	console.log('object')
}) */

async function test () {
	let result = await sleep(4000);
	console.log(result)
	console.log('object');
}

function ajax (url='https://www.easy-mock.com/mock/5ae9d1dd0a492d2535b91366/hfBeam-tims-api/test') {
	return axios(url).then((result) => {
		console.log(result.status, result)
		return result.data
	}).catch( err => {
		return Promise.reject(err)
	});
}

/* ajax().then( res => {
	console.log(res);
}) */
async function fn(arguments) {
	let result = await ajax()
	console.log(result)
}
//fn()

var promise = new Promise((resolve, reject)=>{
	// setTimeout(resolve, 2000, 'new Promise resolve');

	axios('https://www.easy-mock.com/mock/5ae9d1dd0a492d2535b91366/hfBeam-tims-api/test0').then( res =>{
		resolve(res)
	}).catch( err => {
		// console.dir(err.config);
		reject(err)
	})
})

promise.then( (res, rej) => {
	console.log(res.status, res)
	return res.data
}).finally( r => {
	console.log(r)
})



</script>
</html>